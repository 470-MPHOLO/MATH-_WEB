<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math++ | Number Systems & Arithmetic Mastery</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --dark: #1e293b;
            --light: #f8fafc;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --binary: #3b82f6;
            --octal: #8b5cf6;
            --hex: #10b981;
            --decimal: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark);
            min-height: 100vh;
            line-height: 1.6;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            margin: 20px;
            min-height: calc(100vh - 40px);
        }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-20px, -20px) rotate(360deg); }
        }

        .logo {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .welcome-banner {
            background: linear-gradient(135deg, var(--accent), var(--primary));
            color: white;
            padding: 1.5rem;
            margin: 1rem 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 600px;
        }

        .sidebar {
            background: var(--light);
            padding: 2rem 1rem;
            border-right: 1px solid #e2e8f0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            margin: 0.5rem 0;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: 500;
            color: var(--dark);
        }

        .nav-item:hover {
            transform: translateX(8px);
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.2);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
        }

        .nav-icon {
            margin-right: 1rem;
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        .content-area {
            padding: 2rem;
            background: white;
            position: relative;
        }

        .module {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .module.active {
            display: block;
        }

        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .module-icon {
            font-size: 2rem;
            margin-right: 1rem;
            color: var(--primary);
        }

        .module-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .calc-card {
            background: var(--light);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .calc-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .calc-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .calc-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .input-group {
            margin: 1rem 0;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }

        input, select, button, textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
        }

        .result {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #dbeafe, #e0e7ff);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .number-system-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .system-card {
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .system-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .binary { background: linear-gradient(135deg, var(--binary), #2563eb); }
        .octal { background: linear-gradient(135deg, var(--octal), #7c3aed); }
        .hex { background: linear-gradient(135deg, var(--hex), #059669); }
        .decimal { background: linear-gradient(135deg, var(--decimal), #d97706); }

        .system-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .exercise-container {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .exercise-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .difficulty-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .difficulty-beginner { background: var(--success); color: white; }
        .difficulty-intermediate { background: var(--warning); color: white; }
        .difficulty-advanced { background: var(--error); color: white; }

        .exercise-content {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .exercise-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .exercise-option {
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .exercise-option:hover {
            border-color: var(--primary);
            background: #f8fafc;
        }

        .exercise-option.selected {
            border-color: var(--success);
            background: #d1fae5;
        }

        .exercise-option.correct {
            border-color: var(--success);
            background: #d1fae5;
        }

        .exercise-option.incorrect {
            border-color: var(--error);
            background: #fee2e2;
        }

        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-progress {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin: 1.5rem 0;
            overflow: hidden;
        }

        .quiz-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .quiz-question {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            border: 2px solid #e2e8f0;
            margin: 1.5rem 0;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #64748b;
            font-weight: 500;
        }

        .learning-guide {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border-left: 6px solid var(--accent);
        }

        .guide-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .guide-icon {
            font-size: 2rem;
            margin-right: 1rem;
            color: var(--accent);
        }

        .guide-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .guide-content {
            line-height: 1.8;
        }

        .guide-step {
            background: white;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .guide-step h4 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .example-box {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .example-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .hint {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 0.75rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .step-by-step {
            background: #f8f9fa;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            .sidebar {
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 1.5rem;
            }
            h1 {
                font-size: 2rem;
            }
            .calculator-grid, .number-system-grid {
                grid-template-columns: 1fr;
            }
            .welcome-banner {
                margin: 1rem;
                padding: 1rem;
            }
        }

        .achievement-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin: 0.25rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-calculator"></i>
            </div>
            <h1>Math++</h1>
            <p class="tagline">Master Number Systems & Intensive Arithmetic</p>
        </header>

        <div class="welcome-banner">
            <h2>üéØ Welcome to Number Systems Mastery!</h2>
            <p>Master Binary, Octal, Hexadecimal conversions and intensive arithmetic operations</p>
        </div>

        <div class="main-layout">
            <nav class="sidebar">
                <div class="nav-item active" onclick="showModule('dashboard')">
                    <i class="nav-icon fas fa-home"></i>
                    Dashboard
                </div>
                <div class="nav-item" onclick="showModule('learn')">
                    <i class="nav-icon fas fa-graduation-cap"></i>
                    Learning Guide
                </div>
                <div class="nav-item" onclick="showModule('number-systems')">
                    <i class="nav-icon fas fa-sitemap"></i>
                    Number Systems
                </div>
                <div class="nav-item" onclick="showModule('conversions')">
                    <i class="nav-icon fas fa-exchange-alt"></i>
                    System Conversions
                </div>
                <div class="nav-item" onclick="showModule('arithmetic')">
                    <i class="nav-icon fas fa-calculator"></i>
                    Intensive Arithmetic
                </div>
                <div class="nav-item" onclick="showModule('exercises')">
                    <i class="nav-icon fas fa-dumbbell"></i>
                    Exercises
                </div>
                <div class="nav-item" onclick="showModule('quiz')">
                    <i class="nav-icon fas fa-brain"></i>
                    Mastery Quiz
                </div>
                <div class="nav-item" onclick="showModule('progress')">
                    <i class="nav-icon fas fa-trophy"></i>
                    Progress
                </div>
            </nav>

            <main class="content-area">
                <!-- Dashboard -->
                <div id="dashboard" class="module active">
                    <div class="module-header">
                        <i class="module-icon fas fa-home"></i>
                        <h2 class="module-title">Learning Dashboard</h2>
                    </div>
                    
                    <div class="learning-guide">
                        <div class="guide-header">
                            <i class="guide-icon fas fa-rocket"></i>
                            <h3 class="guide-title">Number Systems Learning Path</h3>
                        </div>
                        <div class="guide-content">
                            <div class="guide-step">
                                <h4>üî¢ Step 1: Understand Number Systems</h4>
                                <p>Learn about Decimal, Binary, Octal, and Hexadecimal systems</p>
                            </div>
                            <div class="guide-step">
                                <h4>üîÑ Step 2: Master Conversions</h4>
                                <p>Convert between different number systems effortlessly</p>
                            </div>
                            <div class="guide-step">
                                <h4>üßÆ Step 3: Intensive Arithmetic</h4>
                                <p>Perform arithmetic operations in different number systems</p>
                            </div>
                            <div class="guide-step">
                                <h4>üéØ Step 4: Practice & Quiz</h4>
                                <p>Test your skills with exercises and mastery quizzes</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalProblems">0</div>
                            <div class="stat-label">Problems Solved</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="accuracyRate">0%</div>
                            <div class="stat-label">Accuracy Rate</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="conversionMastery">0</div>
                            <div class="stat-label">Conversions Mastered</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="quizScore">0%</div>
                            <div class="stat-label">Quiz Score</div>
                        </div>
                    </div>

                    <h3>Quick Access Number Systems</h3>
                    <div class="number-system-grid">
                        <div class="system-card decimal" onclick="showModule('number-systems')">
                            <i class="system-icon fas fa-1"></i>
                            <div>Decimal</div>
                            <small>Base-10 System</small>
                        </div>
                        <div class="system-card binary" onclick="showModule('conversions')">
                            <i class="system-icon fas fa-0"></i>
                            <div>Binary</div>
                            <small>Base-2 System</small>
                        </div>
                        <div class="system-card octal" onclick="showModule('conversions')">
                            <i class="system-icon fas fa-8"></i>
                            <div>Octal</div>
                            <small>Base-8 System</small>
                        </div>
                        <div class="system-card hex" onclick="showModule('conversions')">
                            <i class="system-icon fas fa-f"></i>
                            <div>Hexadecimal</div>
                            <small>Base-16 System</small>
                        </div>
                    </div>
                </div>

                <!-- Learning Guide -->
                <div id="learn" class="module">
                    <div class="module-header">
                        <i class="module-icon fas fa-graduation-cap"></i>
                        <h2 class="module-title">Number Systems Learning Guide</h2>
                    </div>

                    <div class="learning-guide">
                        <div class="guide-header">
                            <i class="guide-icon fas fa-book"></i>
                            <h3 class="guide-title">Comprehensive Number Systems Guide</h3>
                        </div>
                        
                        <div class="guide-step">
                            <h4>üî¢ Decimal System (Base-10)</h4>
                            <p>The number system we use daily. Uses digits 0-9.</p>
                            <div class="example-box">
                                <div class="example-title">Example: 345</div>
                                <p>3 √ó 10¬≤ + 4 √ó 10¬π + 5 √ó 10‚Å∞ = 300 + 40 + 5 = 345</p>
                            </div>
                        </div>

                        <div class="guide-step">
                            <h4>üíª Binary System (Base-2)</h4>
                            <p>Used in computers. Uses digits 0 and 1.</p>
                            <div class="example-box">
                                <div class="example-title">Example: 1011</div>
                                <p>1 √ó 2¬≥ + 0 √ó 2¬≤ + 1 √ó 2¬π + 1 √ó 2‚Å∞ = 8 + 0 + 2 + 1 = 11 (decimal)</p>
                            </div>
                        </div>

                        <div class="guide-step">
                            <h4>üéØ Octal System (Base-8)</h4>
                            <p>Used in some computer applications. Uses digits 0-7.</p>
                            <div class="example-box">
                                <div class="example-title">Example: 753</div>
                                <p>7 √ó 8¬≤ + 5 √ó 8¬π + 3 √ó 8‚Å∞ = 448 + 40 + 3 = 491 (decimal)</p>
                            </div>
                        </div>

                        <div class="guide-step">
                            <h4>üåà Hexadecimal System (Base-16)</h4>
                            <p>Widely used in programming. Uses digits 0-9 and A-F.</p>
                            <div class="example-box">
                                <div class="example-title">Example: 2FA</div>
                                <p>2 √ó 16¬≤ + 15 √ó 16¬π + 10 √ó 16‚Å∞ = 512 + 240 + 10 = 762 (decimal)</p>
                            </div>
                        </div>
                    </div>

                    <div class="calculator-grid">
                        <div class="calc-card">
                            <div class="calc-title">Conversion Methods</div>
                            <div class="result">
                                <h4>üîÅ Conversion Techniques:</h4>
                                <ul>
                                    <li><strong>Decimal to Binary</strong>: Repeated division by 2</li>
                                    <li><strong>Binary to Decimal</strong>: Sum of powers of 2</li>
                                    <li><strong>Decimal to Hex</strong>: Repeated division by 16</li>
                                    <li><strong>Binary to Hex</strong>: Group binary digits into sets of 4</li>
                                    <li><strong>Octal to Binary</strong>: Convert each digit to 3 binary digits</li>
                                </ul>
                            </div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Arithmetic Operations</div>
                            <div class="result">
                                <h4>üßÆ System Arithmetic Rules:</h4>
                                <ul>
                                    <li><strong>Binary Addition</strong>: 0+0=0, 0+1=1, 1+1=0 carry 1</li>
                                    <li><strong>Binary Subtraction</strong>: Uses complement method</li>
                                    <li><strong>Hex Addition</strong>: Carry when sum ‚â• 16</li>
                                    <li><strong>Octal Multiplication</strong>: Similar to decimal but base-8</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Number Systems -->
                <div id="number-systems" class="module">
                    <div class="module-header">
                        <i class="module-icon fas fa-sitemap"></i>
                        <h2 class="module-title">Number Systems Explorer</h2>
                    </div>

                    <div class="calculator-grid">
                        <div class="calc-card">
                            <div class="calc-title">Decimal System Explorer</div>
                            <div class="input-group">
                                <label>Enter Decimal Number</label>
                                <input type="number" id="decimalInput" placeholder="255" value="255">
                            </div>
                            <button onclick="exploreDecimal()">Explore Decimal</button>
                            <div id="decimalResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Binary System Explorer</div>
                            <div class="input-group">
                                <label>Enter Binary Number</label>
                                <input type="text" id="binaryInput" placeholder="11111111" value="11111111">
                            </div>
                            <button onclick="exploreBinary()">Explore Binary</button>
                            <div id="binaryResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Octal System Explorer</div>
                            <div class="input-group">
                                <label>Enter Octal Number</label>
                                <input type="text" id="octalInput" placeholder="377" value="377">
                            </div>
                            <button onclick="exploreOctal()">Explore Octal</button>
                            <div id="octalResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Hexadecimal Explorer</div>
                            <div class="input-group">
                                <label>Enter Hex Number</label>
                                <input type="text" id="hexInput" placeholder="FF" value="FF">
                            </div>
                            <button onclick="exploreHex()">Explore Hexadecimal</button>
                            <div id="hexResult" class="result"></div>
                        </div>
                    </div>

                    <div class="learning-guide">
                        <div class="guide-header">
                            <i class="guide-icon fas fa-lightbulb"></i>
                            <h3 class="guide-title">Quick Facts</h3>
                        </div>
                        <div class="guide-content">
                            <p><strong>Why Multiple Number Systems?</strong></p>
                            <ul>
                                <li><strong>Binary</strong>: Perfect for electronic circuits (on/off states)</li>
                                <li><strong>Octal</strong>: Compact representation of binary (3 bits per digit)</li>
                                <li><strong>Hexadecimal</strong>: Even more compact (4 bits per digit)</li>
                                <li><strong>Decimal</strong>: Natural for human counting (10 fingers!)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- System Conversions -->
                <div id="conversions" class="module">
                    <div class="module-header">
                        <i class="module-icon fas fa-exchange-alt"></i>
                        <h2 class="module-title">Number System Conversions</h2>
                    </div>

                    <div class="calculator-grid">
                        <div class="calc-card">
                            <div class="calc-title">Decimal ‚Üî Binary Conversion</div>
                            <div class="input-group">
                                <label>Decimal Number</label>
                                <input type="number" id="decToBinInput" placeholder="255" value="255">
                            </div>
                            <div class="input-group">
                                <label>Binary Number</label>
                                <input type="text" id="binToDecInput" placeholder="11111111" value="11111111">
                            </div>
                            <div class="input-group">
                                <button onclick="decToBin()">Decimal ‚Üí Binary</button>
                                <button onclick="binToDec()">Binary ‚Üí Decimal</button>
                            </div>
                            <div id="binaryConversionResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Decimal ‚Üî Hexadecimal</div>
                            <div class="input-group">
                                <label>Decimal Number</label>
                                <input type="number" id="decToHexInput" placeholder="255" value="255">
                            </div>
                            <div class="input-group">
                                <label>Hexadecimal Number</label>
                                <input type="text" id="hexToDecInput" placeholder="FF" value="FF">
                            </div>
                            <div class="input-group">
                                <button onclick="decToHex()">Decimal ‚Üí Hex</button>
                                <button onclick="hexToDec()">Hex ‚Üí Decimal</button>
                            </div>
                            <div id="hexConversionResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Binary ‚Üî Hexadecimal</div>
                            <div class="input-group">
                                <label>Binary Number</label>
                                <input type="text" id="binToHexInput" placeholder="11111111" value="11111111">
                            </div>
                            <div class="input-group">
                                <label>Hexadecimal Number</label>
                                <input type="text" id="hexToBinInput" placeholder="FF" value="FF">
                            </div>
                            <div class="input-group">
                                <button onclick="binToHex()">Binary ‚Üí Hex</button>
                                <button onclick="hexToBin()">Hex ‚Üí Binary</button>
                            </div>
                            <div id="binHexConversionResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Universal Converter</div>
                            <div class="input-group">
                                <label>Input Number</label>
                                <input type="text" id="universalInput" placeholder="255" value="255">
                            </div>
                            <div class="input-group">
                                <label>From System</label>
                                <select id="fromSystem">
                                    <option value="decimal">Decimal</option>
                                    <option value="binary">Binary</option>
                                    <option value="octal">Octal</option>
                                    <option value="hex">Hexadecimal</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>To System</label>
                                <select id="toSystem">
                                    <option value="decimal">Decimal</option>
                                    <option value="binary">Binary</option>
                                    <option value="octal">Octal</option>
                                    <option value="hex">Hexadecimal</option>
                                </select>
                            </div>
                            <button onclick="universalConvert()">Convert</button>
                            <div id="universalResult" class="result"></div>
                        </div>
                    </div>
                </div>

                <!-- Intensive Arithmetic -->
                <div id="arithmetic" class="module">
                    <div class="module-header">
                        <i class="module-icon fas fa-calculator"></i>
                        <h2 class="module-title">Intensive Arithmetic Operations</h2>
                    </div>

                    <div class="calculator-grid">
                        <div class="calc-card">
                            <div class="calc-title">Binary Arithmetic</div>
                            <div class="input-group">
                                <label>First Binary Number</label>
                                <input type="text" id="binaryNum1" placeholder="1011" value="1011">
                            </div>
                            <div class="input-group">
                                <label>Second Binary Number</label>
                                <input type="text" id="binaryNum2" placeholder="1101" value="1101">
                            </div>
                            <div class="input-group">
                                <select id="binaryOperation">
                                    <option value="add">Addition</option>
                                    <option value="subtract">Subtraction</option>
                                    <option value="multiply">Multiplication</option>
                                </select>
                            </div>
                            <button onclick="binaryArithmetic()">Calculate</button>
                            <div id="binaryArithmeticResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Hexadecimal Arithmetic</div>
                            <div class="input-group">
                                <label>First Hex Number</label>
                                <input type="text" id="hexNum1" placeholder="A5" value="A5">
                            </div>
                            <div class="input-group">
                                <label>Second Hex Number</label>
                                <input type="text" id="hexNum2" placeholder="2F" value="2F">
                            </div>
                            <div class="input-group">
                                <select id="hexOperation">
                                    <option value="add">Addition</option>
                                    <option value="subtract">Subtraction</option>
                                </select>
                            </div>
                            <button onclick="hexArithmetic()">Calculate</button>
                            <div id="hexArithmeticResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Octal Arithmetic</div>
                            <div class="input-group">
                                <label>First Octal Number</label>
                                <input type="text" id="octalNum1" placeholder="75" value="75">
                            </div>
                            <div class="input-group">
                                <label>Second Octal Number</label>
                                <input type="text" id="octalNum2" placeholder="23" value="23">
                            </div>
                            <div class="input-group">
                                <select id="octalOperation">
                                    <option value="add">Addition</option>
                                    <option value="subtract">Subtraction</option>
                                </select>
                            </div>
                            <button onclick="octalArithmetic()">Calculate</button>
                            <div id="octalArithmeticResult" class="result"></div>
                        </div>

                        <div class="calc-card">
                            <div class="calc-title">Mixed System Calculator</div>
                            <div class="input-group">
                                <label>First Number</label>
                                <input type="text" id="mixedNum1" placeholder="1011" value="1011">
                                <select id="mixedSystem1">
                                    <option value="binary">Binary</option>
                                    <option value="decimal">Decimal</option>
                                    <option value="octal">Octal</option>
                                    <option value="hex">Hexadecimal</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Second Number</label>
                                <input type="text" id="mixedNum2" placeholder="A5" value="A5">
                                <select id="mixedSystem2">
                                    <option value="hex">Hexadecimal</option>
                                    <option value="binary">Binary</option>
                                    <option value="decimal">Decimal</option>
                                    <option value="octal">Octal</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <select id="mixedOperation">
                                    <option value="add">Add</option>
                                    <option value="subtract">Subtract</option>
                                    <option value="multiply">Multiply</option>
                                </select>
                            </div>
                            <button onclick="mixedArithmetic()">Calculate</button>
                            <div id="mixedArithmeticResult" class="result"></div>
                        </div>
                    </div>
                </div>

                <!-- Exercises -->
                <div id="exercises" class="module">
                    <div class="module-header">
                        <i class="module-icon fas fa-dumbbell"></i>
                        <h2 class="module-title">Intensive Exercises</h2>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-header">
                            <h3 class="exercise-title">Binary Conversion Exercise</h3>
                            <span class="difficulty-badge difficulty-beginner">Beginner</span>
                        </div>
                        <div class="exercise-content">
                            <p>Convert the decimal number 42 to binary:</p>
                            <div class="exercise-options">
                                <div class="exercise-option" onclick="checkAnswer(this, '101010')">101010</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '110100')">110100</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '101101')">101101</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '111000')">111000</div>
                            </div>
                        </div>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-header">
                            <h3 class="exercise-title">Hexadecimal Addition</h3>
                            <span class="difficulty-badge difficulty-intermediate">Intermediate</span>
                        </div>
                        <div class="exercise-content">
                            <p>Add the hexadecimal numbers: 1A + 2F = ?</p>
                            <div class="exercise-options">
                                <div class="exercise-option" onclick="checkAnswer(this, '49')">49</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '45')">45</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '4A')">4A</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '4F')">4F</div>
                            </div>
                        </div>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-header">
                            <h3 class="exercise-title">Binary Multiplication</h3>
                            <span class="difficulty-badge difficulty-advanced">Advanced</span>
                        </div>
                        <div class="exercise-content">
                            <p>Multiply the binary numbers: 1101 √ó 101 = ?</p>
                            <div class="exercise-options">
                                <div class="exercise-option" onclick="checkAnswer(this, '1000001')">1000001</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '111001')">111001</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '101101')">101101</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '110111')">110111</div>
                            </div>
                        </div>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-header">
                            <h3 class="exercise-title">Octal to Decimal Conversion</h3>
                            <span class="difficulty-badge difficulty-intermediate">Intermediate</span>
                        </div>
                        <div class="exercise-content">
                            <p>Convert the octal number 753 to decimal:</p>
                            <div class="exercise-options">
                                <div class="exercise-option" onclick="checkAnswer(this, '491')">491</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '483')">483</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '501')">501</div>
                                <div class="exercise-option" onclick="checkAnswer(this, '475')">475</div>
                            </div>
                        </div>
                    </div>

                    <button onclick="generateNewExercises()" style="width: 100%; margin-top: 2rem;">
                        <i class="fas fa-sync-alt"></i> Generate New Exercises
                    </button>
                </div>

                <!-- Quiz -->
                <div id="quiz" class="module">
                    <div class="module-header">
                        <i class="module-icon fas fa-brain"></i>
                        <h2 class="module-title">Number Systems Mastery Quiz</h2>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-progress">
                            <div class="quiz-progress-bar" id="quizProgress" style="width: 0%"></div>
                        </div>

                        <div class="quiz-question" id="quizQuestion">
                            <div class="question-text" id="questionText">Loading question...</div>
                            <div id="quizOptions"></div>
                        </div>

                        <div id="quizResult" style="display: none;">
                            <div class="result">
                                <h3>Quiz Completed!</h3>
                                <p>Your Score: <span id="finalScore">0</span>/<span id="totalQuestions">0</span></p>
                                <p id="performanceMessage"></p>
                            </div>
                            <button onclick="startQuiz()" style="width: 100%; margin-top: 1rem;">
                                <i class="fas fa-redo"></i> Take Another Quiz
                            </button>
                        </div>

                        <div id="quizControls">
                            <button onclick="submitAnswer()" id="submitBtn" disabled>Submit Answer</button>
                            <button onclick="nextQuestion()" id="nextBtn" style="display: none;">Next Question</button>
                        </div>
                    </div>
                </div>

                <!-- Progress -->
                <div id="progress" class="module">
                    <div class="module-header">
                        <i class="module-icon fas fa-trophy"></i>
                        <h2 class="module-title">Your Progress</h2>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="progressProblems">0</div>
                            <div class="stat-label">Exercises Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="progressConversions">0</div>
                            <div class="stat-label">Conversions Mastered</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="progressQuizScore">0%</div>
                            <div class="stat-label">Best Quiz Score</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="progressTime">0h</div>
                            <div class="stat-label">Learning Time</div>
                        </div>
                    </div>

                    <div class="learning-guide">
                        <div class="guide-header">
                            <i class="guide-icon fas fa-award"></i>
                            <h3 class="guide-title">Achievements</h3>
                        </div>
                        <div class="guide-content">
                            <div id="achievementsList">
                                <span class="achievement-badge" id="beginnerBadge">üèÜ Beginner</span>
                                <span class="achievement-badge" id="converterBadge" style="display: none;">üîÑ Converter Master</span>
                                <span class="achievement-badge" id="binaryMasterBadge" style="display: none;">üíª Binary Expert</span>
                                <span class="achievement-badge" id="hexMasterBadge" style="display: none;">üåà Hex Pro</span>
                                <span class="achievement-badge" id="quizMasterBadge" style="display: none;">üß† Quiz Master</span>
                            </div>
                        </div>
                    </div>

                    <div class="calc-card">
                        <div class="calc-title">Learning Journey</div>
                        <div class="result">
                            <p><strong>Your Progress Timeline:</strong></p>
                            <div id="progressTimeline">
                                <p>üéØ Start your journey by exploring number systems</p>
                                <p>üîÑ Practice conversions between systems</p>
                                <p>üßÆ Master arithmetic in different bases</p>
                                <p>üéì Complete exercises to reinforce learning</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // User progress tracking
        let userProgress = JSON.parse(localStorage.getItem('mathpp_progress')) || {
            exercisesCompleted: 0,
            conversionsMastered: 0,
            quizScores: [],
            timeSpent: 0,
            achievements: ['beginner']
        };

        let quizState = {
            currentQuestion: 0,
            score: 0,
            selectedAnswer: null,
            questions: [],
            quizActive: false
        };

        // Navigation
        function showModule(moduleId) {
            document.querySelectorAll('.module').forEach(m => m.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            document.getElementById(moduleId).classList.add('active');
            event.currentTarget.classList.add('active');
            
            updateProgressStats();
            
            if (moduleId === 'quiz' && !quizState.quizActive) {
                startQuiz();
            }
        }

        // Number System Explorers
        function exploreDecimal() {
            const decimal = parseInt(document.getElementById('decimalInput').value);
            if (isNaN(decimal)) return;
            
            const binary = decimal.toString(2);
            const octal = decimal.toString(8);
            const hex = decimal.toString(16).toUpperCase();
            
            document.getElementById('decimalResult').innerHTML = `
                <strong>Decimal ${decimal} equals:</strong><br>
                Binary: ${binary}<br>
                Octal: ${octal}<br>
                Hexadecimal: ${hex}
            `;
            
            trackProgress('explorations');
        }

        function exploreBinary() {
            const binary = document.getElementById('binaryInput').value;
            if (!/^[01]+$/.test(binary)) {
                document.getElementById('binaryResult').innerHTML = `<span class="error">Invalid binary number!</span>`;
                return;
            }
            
            const decimal = parseInt(binary, 2);
            const octal = decimal.toString(8);
            const hex = decimal.toString(16).toUpperCase();
            
            document.getElementById('binaryResult').innerHTML = `
                <strong>Binary ${binary} equals:</strong><br>
                Decimal: ${decimal}<br>
                Octal: ${octal}<br>
                Hexadecimal: ${hex}
            `;
            
            trackProgress('explorations');
        }

        function exploreOctal() {
            const octal = document.getElementById('octalInput').value;
            if (!/^[0-7]+$/.test(octal)) {
                document.getElementById('octalResult').innerHTML = `<span class="error">Invalid octal number!</span>`;
                return;
            }
            
            const decimal = parseInt(octal, 8);
            const binary = decimal.toString(2);
            const hex = decimal.toString(16).toUpperCase();
            
            document.getElementById('octalResult').innerHTML = `
                <strong>Octal ${octal} equals:</strong><br>
                Decimal: ${decimal}<br>
                Binary: ${binary}<br>
                Hexadecimal: ${hex}
            `;
            
            trackProgress('explorations');
        }

        function exploreHex() {
            const hex = document.getElementById('hexInput').value.toUpperCase();
            if (!/^[0-9A-F]+$/.test(hex)) {
                document.getElementById('hexResult').innerHTML = `<span class="error">Invalid hexadecimal number!</span>`;
                return;
            }
            
            const decimal = parseInt(hex, 16);
            const binary = decimal.toString(2);
            const octal = decimal.toString(8);
            
            document.getElementById('hexResult').innerHTML = `
                <strong>Hexadecimal ${hex} equals:</strong><br>
                Decimal: ${decimal}<br>
                Binary: ${binary}<br>
                Octal: ${octal}
            `;
            
            trackProgress('explorations');
        }

        // Conversion Functions
        function decToBin() {
            const decimal = parseInt(document.getElementById('decToBinInput').value);
            if (isNaN(decimal)) return;
            
            const binary = decimal.toString(2);
            document.getElementById('binaryConversionResult').innerHTML = 
                `<span class="success">Decimal ${decimal} = Binary ${binary}</span>`;
            
            trackProgress('conversions');
        }

        function binToDec() {
            const binary = document.getElementById('binToDecInput').value;
            if (!/^[01]+$/.test(binary)) {
                document.getElementById('binaryConversionResult').innerHTML = 
                    `<span class="error">Invalid binary number!</span>`;
                return;
            }
            
            const decimal = parseInt(binary, 2);
            document.getElementById('binaryConversionResult').innerHTML = 
                `<span class="success">Binary ${binary} = Decimal ${decimal}</span>`;
            
            trackProgress('conversions');
        }

        function decToHex() {
            const decimal = parseInt(document.getElementById('decToHexInput').value);
            if (isNaN(decimal)) return;
            
            const hex = decimal.toString(16).toUpperCase();
            document.getElementById('hexConversionResult').innerHTML = 
                `<span class="success">Decimal ${decimal} = Hexadecimal ${hex}</span>`;
            
            trackProgress('conversions');
        }

        function hexToDec() {
            const hex = document.getElementById('hexToDecInput').value.toUpperCase();
            if (!/^[0-9A-F]+$/.test(hex)) {
                document.getElementById('hexConversionResult').innerHTML = 
                    `<span class="error">Invalid hexadecimal number!</span>`;
                return;
            }
            
            const decimal = parseInt(hex, 16);
            document.getElementById('hexConversionResult').innerHTML = 
                `<span class="success">Hexadecimal ${hex} = Decimal ${decimal}</span>`;
            
            trackProgress('conversions');
        }

        function binToHex() {
            const binary = document.getElementById('binToHexInput').value;
            if (!/^[01]+$/.test(binary)) {
                document.getElementById('binHexConversionResult').innerHTML = 
                    `<span class="error">Invalid binary number!</span>`;
                return;
            }
            
            const decimal = parseInt(binary, 2);
            const hex = decimal.toString(16).toUpperCase();
            document.getElementById('binHexConversionResult').innerHTML = 
                `<span class="success">Binary ${binary} = Hexadecimal ${hex}</span>`;
            
            trackProgress('conversions');
        }

        function hexToBin() {
            const hex = document.getElementById('hexToBinInput').value.toUpperCase();
            if (!/^[0-9A-F]+$/.test(hex)) {
                document.getElementById('binHexConversionResult').innerHTML = 
                    `<span class="error">Invalid hexadecimal number!</span>`;
                return;
            }
            
            const decimal = parseInt(hex, 16);
            const binary = decimal.toString(2);
            document.getElementById('binHexConversionResult').innerHTML = 
                `<span class="success">Hexadecimal ${hex} = Binary ${binary}</span>`;
            
            trackProgress('conversions');
        }

        function universalConvert() {
            const input = document.getElementById('universalInput').value;
            const fromSystem = document.getElementById('fromSystem').value;
            const toSystem = document.getElementById('toSystem').value;
            
            let decimal;
            
            // Convert to decimal first
            switch(fromSystem) {
                case 'decimal':
                    decimal = parseInt(input);
                    break;
                case 'binary':
                    if (!/^[01]+$/.test(input)) {
                        showError('Invalid binary number');
                        return;
                    }
                    decimal = parseInt(input, 2);
                    break;
                case 'octal':
                    if (!/^[0-7]+$/.test(input)) {
                        showError('Invalid octal number');
                        return;
                    }
                    decimal = parseInt(input, 8);
                    break;
                case 'hex':
                    if (!/^[0-9A-F]+$/i.test(input)) {
                        showError('Invalid hexadecimal number');
                        return;
                    }
                    decimal = parseInt(input, 16);
                    break;
            }
            
            if (isNaN(decimal)) {
                showError('Invalid input number');
                return;
            }
            
            // Convert from decimal to target system
            let result;
            switch(toSystem) {
                case 'decimal':
                    result = decimal.toString();
                    break;
                case 'binary':
                    result = decimal.toString(2);
                    break;
                case 'octal':
                    result = decimal.toString(8);
                    break;
                case 'hex':
                    result = decimal.toString(16).toUpperCase();
                    break;
            }
            
            document.getElementById('universalResult').innerHTML = 
                `<span class="success">${input} (${fromSystem}) = ${result} (${toSystem})</span>`;
            
            trackProgress('conversions');
        }

        // Arithmetic Functions - ALL FIXED VERSIONS
        function binaryArithmetic() {
            const num1 = document.getElementById('binaryNum1').value;
            const num2 = document.getElementById('binaryNum2').value;
            const operation = document.getElementById('binaryOperation').value;
            
            if (!/^[01]+$/.test(num1) || !/^[01]+$/.test(num2)) {
                document.getElementById('binaryArithmeticResult').innerHTML = 
                    `<span class="error">Invalid binary numbers!</span>`;
                return;
            }
            
            const dec1 = parseInt(num1, 2);
            const dec2 = parseInt(num2, 2);
            let result, binaryResult;
            
            switch(operation) {
                case 'add':
                    result = dec1 + dec2;
                    binaryResult = result.toString(2);
                    document.getElementById('binaryArithmeticResult').innerHTML = 
                        `<span class="success">${num1} + ${num2} = ${binaryResult}<br>(${dec1} + ${dec2} = ${result})</span>`;
                    break;
                case 'subtract':
                    result = dec1 - dec2;
                    binaryResult = result.toString(2);
                    document.getElementById('binaryArithmeticResult').innerHTML = 
                        `<span class="success">${num1} - ${num2} = ${binaryResult}<br>(${dec1} - ${dec2} = ${result})</span>`;
                    break;
                case 'multiply':
                    result = dec1 * dec2;
                    binaryResult = result.toString(2);
                    document.getElementById('binaryArithmeticResult').innerHTML = 
                        `<span class="success">${num1} √ó ${num2} = ${binaryResult}<br>(${dec1} √ó ${dec2} = ${result})</span>`;
                    break;
            }
            
            trackProgress('arithmetic');
        }

        function hexArithmetic() {
            const num1 = document.getElementById('hexNum1').value.toUpperCase();
            const num2 = document.getElementById('hexNum2').value.toUpperCase();
            const operation = document.getElementById('hexOperation').value;
            
            if (!/^[0-9A-F]+$/.test(num1) || !/^[0-9A-F]+$/.test(num2)) {
                document.getElementById('hexArithmeticResult').innerHTML = 
                    `<span class="error">Invalid hexadecimal numbers!</span>`;
                return;
            }
            
            const dec1 = parseInt(num1, 16);
            const dec2 = parseInt(num2, 16);
            let result, hexResult;
            
            switch(operation) {
                case 'add':
                    result = dec1 + dec2;
                    hexResult = result.toString(16).toUpperCase();
                    document.getElementById('hexArithmeticResult').innerHTML = 
                        `<span class="success">${num1} + ${num2} = ${hexResult}<br>(${dec1} + ${dec2} = ${result})</span>`;
                    break;
                case 'subtract':
                    result = dec1 - dec2;
                    hexResult = result.toString(16).toUpperCase();
                    document.getElementById('hexArithmeticResult').innerHTML = 
                        `<span class="success">${num1} - ${num2} = ${hexResult}<br>(${dec1} - ${dec2} = ${result})</span>`;
                    break;
            }
            
            trackProgress('arithmetic');
        }

        // FIXED: Octal Arithmetic Function
        function octalArithmetic() {
            const num1 = document.getElementById('octalNum1').value;
            const num2 = document.getElementById('octalNum2').value;
            const operation = document.getElementById('octalOperation').value;
            
            if (!/^[0-7]+$/.test(num1) || !/^[0-7]+$/.test(num2)) {
                document.getElementById('octalArithmeticResult').innerHTML = 
                    `<span class="error">Invalid octal numbers! Only digits 0-7 allowed.</span>`;
                return;
            }
            
            const dec1 = parseInt(num1, 8);
            const dec2 = parseInt(num2, 8);
            let result, octalResult;
            
            switch(operation) {
                case 'add':
                    result = dec1 + dec2;
                    octalResult = result.toString(8);
                    document.getElementById('octalArithmeticResult').innerHTML = 
                        `<span class="success">${num1} + ${num2} = ${octalResult}<br>(${dec1} + ${dec2} = ${result})</span>`;
                    break;
                case 'subtract':
                    result = dec1 - dec2;
                    if (result < 0) {
                        document.getElementById('octalArithmeticResult').innerHTML = 
                            `<span class="error">Result cannot be negative in octal arithmetic.</span>`;
                        return;
                    }
                    octalResult = result.toString(8);
                    document.getElementById('octalArithmeticResult').innerHTML = 
                        `<span class="success">${num1} - ${num2} = ${octalResult}<br>(${dec1} - ${dec2} = ${result})</span>`;
                    break;
            }
            
            trackProgress('arithmetic');
        }

        function mixedArithmetic() {
            const num1 = document.getElementById('mixedNum1').value;
            const num2 = document.getElementById('mixedNum2').value;
            const system1 = document.getElementById('mixedSystem1').value;
            const system2 = document.getElementById('mixedSystem2').value;
            const operation = document.getElementById('mixedOperation').value;
            
            let dec1, dec2;
            
            // Convert first number to decimal
            switch(system1) {
                case 'decimal':
                    dec1 = parseInt(num1);
                    break;
                case 'binary':
                    if (!/^[01]+$/.test(num1)) {
                        showError('Invalid binary number');
                        return;
                    }
                    dec1 = parseInt(num1, 2);
                    break;
                case 'octal':
                    if (!/^[0-7]+$/.test(num1)) {
                        showError('Invalid octal number');
                        return;
                    }
                    dec1 = parseInt(num1, 8);
                    break;
                case 'hex':
                    if (!/^[0-9A-F]+$/i.test(num1)) {
                        showError('Invalid hexadecimal number');
                        return;
                    }
                    dec1 = parseInt(num1, 16);
                    break;
            }
            
            // Convert second number to decimal
            switch(system2) {
                case 'decimal':
                    dec2 = parseInt(num2);
                    break;
                case 'binary':
                    if (!/^[01]+$/.test(num2)) {
                        showError('Invalid binary number');
                        return;
                    }
                    dec2 = parseInt(num2, 2);
                    break;
                case 'octal':
                    if (!/^[0-7]+$/.test(num2)) {
                        showError('Invalid octal number');
                        return;
                    }
                    dec2 = parseInt(num2, 8);
                    break;
                case 'hex':
                    if (!/^[0-9A-F]+$/i.test(num2)) {
                        showError('Invalid hexadecimal number');
                        return;
                    }
                    dec2 = parseInt(num2, 16);
                    break;
            }
            
            if (isNaN(dec1) || isNaN(dec2)) {
                showError('Invalid input numbers');
                return;
            }
            
            let result;
            switch(operation) {
                case 'add':
                    result = dec1 + dec2;
                    break;
                case 'subtract':
                    result = dec1 - dec2;
                    break;
                case 'multiply':
                    result = dec1 * dec2;
                    break;
            }
            
            const binaryResult = result.toString(2);
            const hexResult = result.toString(16).toUpperCase();
            const octalResult = result.toString(8);
            
            document.getElementById('mixedArithmeticResult').innerHTML = 
                `<span class="success">
                    ${num1} (${system1}) ${getOperationSymbol(operation)} ${num2} (${system2}) = ${result}<br>
                    Binary: ${binaryResult}<br>
                    Hexadecimal: ${hexResult}<br>
                    Octal: ${octalResult}
                </span>`;
            
            trackProgress('arithmetic');
        }

        // FIXED: Exercise Functions
        
function checkAnswer(element, correctAnswer) {
    const options = element.parentElement.querySelectorAll('.exercise-option');
    
    // Clear all states
    options.forEach(opt => {
        opt.classList.remove('selected', 'correct', 'incorrect');
    });
    
    // Mark selected
    element.classList.add('selected');
    
    // Mark correct answer
    options.forEach(opt => {
        if (opt.textContent.trim() === correctAnswer) {
            opt.classList.add('correct');
        }
    });
    
    // Mark incorrect if wrong
    if (element.textContent.trim() !== correctAnswer) {
        element.classList.add('incorrect');
    }
    
    // Disable further clicks
    options.forEach(opt => {
        opt.onclick = null;
    });
    
    // IMMEDIATE FEEDBACK - NO TIMEOUT NEEDED
    if (element.textContent.trim() === correctAnswer) {
        alert('‚úÖ Correct! Well done!');
        trackProgress('exercises');
    } else {
        alert('‚ùå Incorrect. The right answer was highlighted.');
    }
}

        function generateNewExercises() {
            // In a full implementation, this would generate new random exercises
            alert('New exercises generated! Refresh the page for new problems.');
        }

        // Quiz System
        function startQuiz() {
            quizState = {
                currentQuestion: 0,
                score: 0,
                selectedAnswer: null,
                quizActive: true,
                questions: generateQuizQuestions()
            };
            
            document.getElementById('quizResult').style.display = 'none';
            document.getElementById('quizQuestion').style.display = 'block';
            document.getElementById('quizControls').style.display = 'block';
            
            loadQuestion();
        }

        function generateQuizQuestions() {
            return [
                {
                    question: "What is the binary equivalent of decimal 15?",
                    options: ["1111", "1010", "1100", "1001"],
                    correct: 0
                },
                {
                    question: "Convert hexadecimal 'A' to decimal:",
                    options: ["10", "11", "12", "13"],
                    correct: 0
                },
                {
                    question: "What is 1011 (binary) + 1101 (binary)?",
                    options: ["11000", "10000", "10111", "11100"],
                    correct: 0
                },
                {
                    question: "Convert octal 17 to decimal:",
                    options: ["15", "17", "13", "19"],
                    correct: 0
                },
                {
                    question: "What is hexadecimal '1F' in binary?",
                    options: ["11111", "11110", "11101", "11100"],
                    correct: 0
                }
            ];
        }

        function loadQuestion() {
            const q = quizState.questions[quizState.currentQuestion];
            document.getElementById('questionText').textContent = q.question;
            
            const optionsDiv = document.getElementById('quizOptions');
            optionsDiv.innerHTML = '';
            
            q.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'exercise-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnswer(index);
                optionsDiv.appendChild(optionDiv);
            });
            
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('quizProgress').style.width = 
                `${((quizState.currentQuestion) / quizState.questions.length) * 100}%`;
        }

        function selectAnswer(index) {
            const options = document.querySelectorAll('#quizOptions .exercise-option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
            quizState.selectedAnswer = index;
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            if (quizState.selectedAnswer === null) return;
            
            const q = quizState.questions[quizState.currentQuestion];
            const options = document.querySelectorAll('#quizOptions .exercise-option');
            
            options.forEach((opt, index) => {
                if (index === q.correct) {
                    opt.classList.add('correct');
                }
                if (index === quizState.selectedAnswer && index !== q.correct) {
                    opt.classList.add('incorrect');
                }
            });
            
            if (quizState.selectedAnswer === q.correct) {
                quizState.score++;
            }
            
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        function nextQuestion() {
            quizState.currentQuestion++;
            
            if (quizState.currentQuestion < quizState.questions.length) {
                loadQuestion();
                document.getElementById('submitBtn').style.display = 'inline-block';
                document.getElementById('nextBtn').style.display = 'none';
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            const scorePercentage = Math.round((quizState.score / quizState.questions.length) * 100);
            document.getElementById('finalScore').textContent = quizState.score;
            document.getElementById('totalQuestions').textContent = quizState.questions.length;
            
            let message;
            if (scorePercentage >= 90) message = "üéâ Excellent! You're a number systems master!";
            else if (scorePercentage >= 70) message = "üëç Great job! Keep practicing!";
            else if (scorePercentage >= 50) message = "üìö Good effort! Review the learning guide.";
            else message = "üí™ Keep learning! You'll improve with practice.";
            
            document.getElementById('performanceMessage').textContent = message;
            document.getElementById('quizResult').style.display = 'block';
            document.getElementById('quizQuestion').style.display = 'none';
            document.getElementById('quizControls').style.display = 'none';
            document.getElementById('quizProgress').style.width = '100%';
            
            // Update progress
            userProgress.quizScores.push(scorePercentage);
            if (scorePercentage > 80 && !userProgress.achievements.includes('quizMaster')) {
                userProgress.achievements.push('quizMaster');
                document.getElementById('quizMasterBadge').style.display = 'inline-flex';
            }
            saveProgress();
        }

        // Progress Tracking
        function trackProgress(type) {
            switch(type) {
                case 'explorations':
                    userProgress.exercisesCompleted += 0.5;
                    break;
                case 'conversions':
                    userProgress.conversionsMastered++;
                    userProgress.exercisesCompleted++;
                    if (userProgress.conversionsMastered >= 10 && !userProgress.achievements.includes('converter')) {
                        userProgress.achievements.push('converter');
                        document.getElementById('converterBadge').style.display = 'inline-flex';
                    }
                    break;
                case 'arithmetic':
                    userProgress.exercisesCompleted++;
                    if (userProgress.exercisesCompleted >= 20 && !userProgress.achievements.includes('binaryMaster')) {
                        userProgress.achievements.push('binaryMaster');
                        document.getElementById('binaryMasterBadge').style.display = 'inline-flex';
                    }
                    break;
                case 'exercises':
                    userProgress.exercisesCompleted++;
                    if (userProgress.exercisesCompleted >= 15 && !userProgress.achievements.includes('hexMaster')) {
                        userProgress.achievements.push('hexMaster');
                        document.getElementById('hexMasterBadge').style.display = 'inline-flex';
                    }
                    break;
            }
            userProgress.timeSpent += 0.1;
            saveProgress();
            updateProgressStats();
        }

        function updateProgressStats() {
            // Dashboard stats
            document.getElementById('totalProblems').textContent = Math.floor(userProgress.exercisesCompleted);
            document.getElementById('conversionMastery').textContent = userProgress.conversionsMastered;
            
            const avgScore = userProgress.quizScores.length > 0 ? 
                Math.round(userProgress.quizScores.reduce((a, b) => a + b) / userProgress.quizScores.length) : 0;
            document.getElementById('accuracyRate').textContent = avgScore + '%';
            document.getElementById('quizScore').textContent = avgScore + '%';
            
            // Progress module stats
            document.getElementById('progressProblems').textContent = Math.floor(userProgress.exercisesCompleted);
            document.getElementById('progressConversions').textContent = userProgress.conversionsMastered;
            document.getElementById('progressQuizScore').textContent = avgScore + '%';
            document.getElementById('progressTime').textContent = Math.floor(userProgress.timeSpent) + 'h';
        }

        function saveProgress() {
            localStorage.setItem('mathpp_progress', JSON.stringify(userProgress));
        }

        // Helper Functions
        function showError(message) {
            alert('Error: ' + message);
        }

        function getOperationSymbol(operation) {
            switch(operation) {
                case 'add': return '+';
                case 'subtract': return '-';
                case 'multiply': return '√ó';
                default: return '';
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressStats();
            
            // Show achievements
            if (userProgress.achievements.includes('converter')) {
                document.getElementById('converterBadge').style.display = 'inline-flex';
            }
            if (userProgress.achievements.includes('binaryMaster')) {
                document.getElementById('binaryMasterBadge').style.display = 'inline-flex';
            }
            if (userProgress.achievements.includes('hexMaster')) {
                document.getElementById('hexMasterBadge').style.display = 'inline-flex';
            }
            if (userProgress.achievements.includes('quizMaster')) {
                document.getElementById('quizMasterBadge').style.display = 'inline-flex';
            }
            
            // First-time welcome
            if (!localStorage.getItem('mathpp_welcome')) {
                setTimeout(() => {
                    alert('Welcome to Math++ Number Systems Mastery! üöÄ\nStart with the Learning Guide to understand different number systems.');
                    localStorage.setItem('mathpp_welcome', 'true');
                }, 1000);
            }
        });
    </script>
</body>
</html>
